<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library Management System</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Toast Notifications -->
    <div id="notification-area"></div>
    
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="hidden">
        <div class="spinner"></div>
        <p>Loading...</p>
    </div>

    <div class="container">
        <header>
            <div class="header-top">
                <h1><i class="fas fa-book"></i> Library Management System</h1>
                <div class="header-actions">
                    <button id="theme-toggle" class="btn-icon" title="Toggle theme">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button id="export-btn" class="btn-icon" title="Export data">
                        <i class="fas fa-download"></i>
                    </button>
                </div>
            </div>
            <p class="subtitle">Manage books, members, and borrowing with ease</p>
        </header>

        <!-- Stats Dashboard -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total Books</h3>
                <p id="total-books">0</p>
            </div>
            <div class="stat-card">
                <h3>Available</h3>
                <p id="available-books">0</p>
            </div>
            <div class="stat-card">
                <h3>Members</h3>
                <p id="total-members">0</p>
            </div>
            <div class="stat-card">
                <h3>Borrowed</h3>
                <p id="borrowed-books">0</p>
            </div>
        </div>

        <main class="main-grid">
            <!-- Left Panel: Controls -->
            <aside class="control-panel">
                <!-- Add Book Section -->
                <section class="card">
                    <h2><i class="fas fa-plus-circle"></i> Add Book</h2>
                    <div class="form-group">
                        <input type="text" id="book-title" class="form-input" placeholder="Book Title" required>
                        <input type="text" id="book-author" class="form-input" placeholder="Author" required>
                        <div class="input-row">
                            <input type="text" id="book-isbn" class="form-input" placeholder="ISBN" required>
                            <input type="number" id="book-year" class="form-input" placeholder="Year">
                        </div>
                        <select id="book-type" class="form-input">
                            <option value="regular">Regular Book</option>
                            <option value="ebook">E-Book</option>
                            <option value="audiobook">Audio Book</option>
                        </select>
                        <button id="add-book-btn" class="btn btn-primary">
                            <i class="fas fa-book-medical"></i> Add Book
                        </button>
                    </div>
                </section>

                <!-- Add Member Section -->
                <section class="card">
                    <h2><i class="fas fa-user-plus"></i> Add Member</h2>
                    <div class="form-group">
                        <input type="text" id="member-name" class="form-input" placeholder="Full Name" required>
                        <input type="email" id="member-email" class="form-input" placeholder="Email" required>
                        <button id="add-member-btn" class="btn btn-secondary">
                            <i class="fas fa-user-plus"></i> Add Member
                        </button>
                    </div>
                </section>

                <!-- Search & Filter -->
                <section class="card">
                    <h2><i class="fas fa-search"></i> Search & Filter</h2>
                    <div class="form-group">
                        <input type="text" id="search-input" class="form-input" 
                               placeholder="Search books..." autocomplete="off">
                        <div class="filter-row">
                            <select id="filter-type" class="form-input">
                                <option value="all">All Types</option>
                                <option value="regular">Regular</option>
                                <option value="ebook">E-Books</option>
                                <option value="audiobook">Audio</option>
                            </select>
                            <select id="filter-status" class="form-input">
                                <option value="all">All Status</option>
                                <option value="available">Available</option>
                                <option value="borrowed">Borrowed</option>
                            </select>
                        </div>
                    </div>
                </section>

                <!-- Quick Actions -->
                <section class="card">
                    <h2><i class="fas fa-bolt"></i> Quick Actions</h2>
                    <div class="action-buttons">
                        <button id="import-api-btn" class="btn btn-outline">
                            <i class="fas fa-cloud-download-alt"></i> Import from API
                        </button>
                        <button id="export-csv-btn" class="btn btn-outline">
                            <i class="fas fa-file-export"></i> Export CSV
                        </button>
                        <button id="clear-data-btn" class="btn btn-danger">
                            <i class="fas fa-trash"></i> Clear All
                        </button>
                    </div>
                </section>
            </aside>

            <!-- Main Content: Tabs -->
            <div class="content-area">
                <!-- Tab Navigation -->
                <nav class="tab-nav">
                    <button class="tab-btn active" data-tab="books">
                        <i class="fas fa-book"></i> Books
                    </button>
                    <button class="tab-btn" data-tab="members">
                        <i class="fas fa-users"></i> Members
                    </button>
                    <button class="tab-btn" data-tab="borrowed">
                        <i class="fas fa-exchange-alt"></i> Borrowed
                    </button>
                    <button class="tab-btn" data-tab="analytics">
                        <i class="fas fa-chart-bar"></i> Analytics
                    </button>
                </nav>

                <!-- Books Tab -->
                <div id="books-tab" class="tab-content active">
                    <div class="tab-header">
                        <h2><i class="fas fa-book-open"></i> Book Collection</h2>
                        <div class="tab-actions">
                            <button id="bulk-select-btn" class="btn btn-outline">
                                <i class="fas fa-check-square"></i> Select Multiple
                            </button>
                            <button id="refresh-books" class="btn btn-outline">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                        </div>
                    </div>
                    <div id="books-container" class="cards-grid"></div>
                </div>

                <!-- Members Tab -->
                <div id="members-tab" class="tab-content">
                    <div class="tab-header">
                        <h2><i class="fas fa-users"></i> Library Members</h2>
                    </div>
                    <div id="members-container" class="cards-grid"></div>
                </div>

                <!-- Borrowed Tab -->
                <div id="borrowed-tab" class="tab-content">
                    <div class="tab-header">
                        <h2><i class="fas fa-exchange-alt"></i> Borrowed Books</h2>
                        <button id="send-reminders" class="btn btn-warning">
                            <i class="fas fa-bell"></i> Send Reminders
                        </button>
                    </div>
                    <div id="borrowed-container" class="cards-grid"></div>
                </div>

                <!-- Analytics Tab -->
                <div id="analytics-tab" class="tab-content">
                    <div class="tab-header">
                        <h2><i class="fas fa-chart-bar"></i> Analytics Dashboard</h2>
                    </div>
                    <div class="analytics-content">
                        <div class="chart-container">
                            <canvas id="books-chart"></canvas>
                        </div>
                        <div class="stats-cards">
                            <div class="stat-card">
                                <h3>Most Popular Genre</h3>
                                <p id="popular-genre">-</p>
                            </div>
                            <div class="stat-card">
                                <h3>Top Borrower</h3>
                                <p id="top-borrower">-</p>
                            </div>
                            <div class="stat-card">
                                <h3>Busiest Day</h3>
                                <p id="busy-day">-</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>Library Management System &copy; 2024</p>
            <div class="footer-info">
                <span id="connection-status">
                    <i class="fas fa-wifi"></i> Online
                </span>
                <span id="last-updated">
                    Last updated: <span id="last-updated-time">Never</span>
                </span>
            </div>
        </footer>
    </div>

    <!-- Import from API Modal -->
    <div id="api-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-cloud-download-alt"></i> Import from Open Library</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <input type="text" id="api-search" class="form-input" 
                       placeholder="Search for books..." autocomplete="off">
                <div id="api-results" class="search-results"></div>
            </div>
            <div class="modal-footer">
                <button id="cancel-import" class="btn btn-outline">Cancel</button>
                <button id="confirm-import" class="btn btn-primary" disabled>
                    <i class="fas fa-download"></i> Import Selected
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>